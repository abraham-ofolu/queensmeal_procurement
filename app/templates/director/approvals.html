{% extends "base.html" %}
{% block content %}

<h2>Director Approvals</h2>

<table border="1" cellpadding="6">
<tr>
  <th>Item</th>
  <th>Amount</th>
  <th>Status</th>
  <th>Action</th>
</tr>

{% for r in requests %}
<tr>
  <td>{{ r.item }}</td>
  <td>{{ r.amount }}</td>
  <td>{{ r.status }}</td>
  <td>

    {% if r.status == "pending" %}
      <form method="POST" action="{{ url_for('director.approve', request_id=r.id) }}" style="display:inline;">
        <button>Approve</button>
      </form>
      <form method="POST" action="{{ url_for('director.reject', request_id=r.id) }}" style="display:inline;">
        <button>Reject</button>
      </form>

    {% elif r.status == "approved" %}
      <form method="POST" action="{{ url_for('director.pay', request_id=r.id) }}" enctype="multipart/form-data">
        <input type="number" step="0.01" name="amount_paid" required>
        <input type="file" name="receipt">
        <button>Pay</button>
      </form>

    {% else %}
      â€”
    {% endif %}

  </td>
</tr>
{% endfor %}
</table>

{% endblock %}
