{% extends "base.html" %}
{% block content %}
<div class="container" style="max-width: 1100px;">

  <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px;">
    <div>
      <h2>Procurement Requests</h2>
      <p style="opacity:0.8;">Create, track, and route requests for approval and payment.</p>
    </div>

    {% if current_user.role|lower == 'procurement' %}
      <a href="{{ url_for('procurement.create') }}" class="btn btn-primary">
        + Create Request
      </a>
    {% endif %}
  </div>

  <div class="table-responsive" style="margin-top:16px;">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>ID</th>
          <th>Item</th>
          <th>Qty</th>
          <th>Amount</th>
          <th>Vendor</th>
          <th>Status</th>
          <th>Created</th>
        </tr>
      </thead>
      <tbody>
        {% for r in requests %}
        <tr>
          <td>#{{ r.id }}</td>
          <td>{{ r.item }}</td>
          <td>{{ r.quantity }}</td>
          <td>{{ r.amount }}</td>
          <td>{{ r.vendor.name if r.vendor else '-' }}</td>
          <td><b>{{ r.status }}</b></td>
          <td>{{ r.created_at }}</td>
        </tr>
        {% endfor %}
        {% if requests|length == 0 %}
        <tr>
          <td colspan="7">No requests yet.</td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
